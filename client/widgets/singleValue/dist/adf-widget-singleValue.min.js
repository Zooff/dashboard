!function(e,t){"use strict";function a(e){e.widget("singleValue",{title:"Affichage Simple",description:"Affiche une donn√©e",templateUrl:"{widgetsPath}/singleValue/src/view/view.html",controller:"singleValueController",controllerAs:"sv",reload:!0,resolve:{data:["singleValueService","config",function(e,t){return e.get(t)}]},edit:{controller:"singleValueEditController",controllerAs:"sv",templateUrl:"{widgetsPath}/singleValue/src/edit/edit.html"}})}function l(e,t,a,l,i){if(l){var n=this;this.data=l,n.data.config.listener&&e.$on("DatTest",function(e,t){n.data.config.urlReplace=t,n.data.load=!0,i.get(n.data.config).then(function(e){n.data.load=!1,n.data=e})})}}function i(e,t,a){function l(){return a.columns||(a.columns=[]),a.columns}this.config=a,e.getAutocompletion=function(e){return t.get("/api/autocomplete",{params:{val:e}}).then(function(e){return e.data})},this.addColumn=function(){l().push({})},this.removeColumn=function(e){l().splice(e,1)}}function n(e,t,a){function l(e){var t=[];return angular.forEach(e.columns,function(e,l){e.path&&t.push({title:e.title,path:a(e.path)})}),t}function i(e,t){var i={config:e,principalData:{},additionalData:[]};e.list=[];for(var n in t)e.list.push(n);if(e.root){var o=a(e.root)(t);i.principalData={desc:e.desc,data:o}}var r=l(e);return angular.forEach(r,function(e,a){var l=e.path(t);i.additionalData.push({title:e.title,data:l})}),i}function n(e){var a=e.url.replace(/:\w*/,e.urlReplace);return t.get(a).then(function(e){return e.data}).then(function(t){return i(e,t)})}function o(e){console.log("GET");var t=null;return e.url&&(t=n(e)),t}return{get:o}}angular.module("adf.widget.singleValue",["adf.provider"]).config(a),a.$inject=["dashboardProvider"],angular.module("adf.widget.singleValue").run(["$templateCache",function(e){e.put("{widgetsPath}/singleValue/src/edit/edit.html",'<script type=text/ng-template id=autocomplete.html><a> <span ng-bind-html="match.model.url | uibTypeaheadHighlight:query"></span> | <small ng-bind-html="match.model.desc | uibTypeaheadHighlight:query"></small> </a></script><form role=form><div class=form-group><label for=sample>Datasource</label> <input type=text class=form-control ng-model=config.url placeholder="Enter url" uib-typeahead="address.url as address.url for address in getAutocompletion($viewValue)" typeahead-template-url=autocomplete.html typeahead-loading=load typeahead-no-result=noResults></div><input type=checkbox ng-model=config.listener> <label>Slave</label><div><label>Principal Data</label></div><div class="form-inline padding-bottom"><div class=form-group><label class=sr-only for=desc>Description</label> <input type=text id=desc class=form-control ng-model=config.desc placeholder="Enter Description of the data"></div><div class=form-group><label class=sr-only for=sample>Principal Data</label><select ng-model=config.root class=form-control><option ng-repeat="el in config.list" value={{el}}>{{el}}</option></select></div></div><div ng-if=!config.listener><div><label>Additional Data</label></div><div class="form-inline padding-bottom" ng-repeat="col in sv.config.columns"><div class=form-group><label class=sr-only for=title-{{$index}}>Title</label> <input type=text id=title-{{$index}} class=form-control placeholder=Title ng-model=col.title required></div><div class=form-group><label class=sr-only for=path-{{$index}}>Path</label> <input type=text id=path-{{$index}} class=form-control placeholder=Path ng-model=col.path required></div><button type=button class="btn btn-warning" ng-click=sv.removeColumn($index)><i class="fa fa-minus"></i> Remove</button></div><button type=button class="btn btn-primary" ng-click=sv.addColumn()><i class="fa fa-plus"></i> Add</button></div></form>'),e.put("{widgetsPath}/singleValue/src/view/view.html",'<div><div ng-hide=sv.data class="alert alert-info" role=alert>Please insert a url to the widget configuration</div><div ng-show=!sv.data.load><div class="text-center col-md-12"><p>{{sv.data.config.urlReplace}}</p><h1 style="word-wrap: break-word">{{sv.data.principalData.data}}</h1><p class="text-center small">{{sv.data.principalData.desc}}</p></div><ul class="list-inline text-center"><li ng-repeat="addData in sv.data.additionalData">{{addData.title}} : {{addData.data}}</li></ul></div><div ng-hide=!sv.data.load class=text-center><i class="fa fa-spinner fa-pulse fa-3x" aria-hidden=true></i></div></div>')}]),angular.module("adf.widget.singleValue").controller("singleValueController",l),l.$inject=["$rootScope","$scope","$timeout","data","singleValueService"],angular.module("adf.widget.singleValue").controller("singleValueEditController",i),i.$inject=["$scope","$http","config"],angular.module("adf.widget.singleValue").service("singleValueService",n),n.$inject=["$q","$http","$parse"]}(window);