!function(e,r){"use strict";function t(e){e.widget("beerCounter",{title:"beerCounter",description:"Simple counter of beer",templateUrl:"{widgetsPath}/beerCounter/src/view/view.html",controller:"beerController",controllerAs:"beer",reload:!0,resolve:{data:["beerService",function(e){return e.get()}]},edit:{controller:"beerEditController",controllerAs:"beer",templateUrl:"{widgetsPath}/beerCounter/src/edit/edit.html"}})}function n(e,r,t){this.data=r.data,this.user=r.user,this.value=r.value,e.addBeer=function(e){t.addBeer(e)},e.removeBeer=function(e){t.removeBeer(e)}}function a(e,r,t){this.config=r,e.addUser=function(e){t.addUser(e)}}function i(e,r,t){function n(e){s[e].beer>=1&&s[e].beer--,f[e]=s[e].beer,u(s)}function a(e){s[e].beer++,f[e]=s[e].beer,u(s)}function i(e){s.push({user:e,beer:1}),b.push(e),f.push(1),u(s)}function o(e){return s=e,b=e.map(function(e){return e.user}),f=e.map(function(e){return e.beer}),{data:s,user:b,value:f}}function d(e){return r.get(e).then(function(e){return e.data?o(e.data):s},function(){return console.log("Error URL"),s=[]})}function l(){var e=null;return c&&(e=d(c)),e}function u(e){return r.post(c,e)}var c="api/beers",s=[],b=[],f=[];return{get:l,addUser:i,addBeer:a,removeBeer:n,user:b,value:f}}angular.module("adf.widget.beerCounter",["adf.provider"]).config(t),t.$inject=["dashboardProvider"],angular.module("adf.widget.beerCounter").run(["$templateCache",function(e){e.put("{widgetsPath}/beerCounter/src/edit/edit.html",'<form role=form><div><label>Add a Beer</label></div><div class="form-inline padding-bottom"><input type=text id=name class=form-control placeholder=Name ng-model=user.name> <button type=button class="btn btn-primary" ng-click=addUser(user.name)><i class="fa fa-plus"></i> Add</button></div></form>'),e.put("{widgetsPath}/beerCounter/src/view/view.html",'<div><div ng-hide=beer.data class="alert alert-info" role=alert>Please insert a url to the widget configuration</div><div ng-show=beer.data class=row><div class=col-md-6><ul><li ng-repeat="b in beer.data">{{b.user}} {{b.beer}} <i class="fa fa-beer fa-lg" aria-hidden=true></i> <i class="fa fa-plus-circle" aria-hidden=true ng-click=addBeer($index)></i> <i class="fa fa-minus-circle" aria-hidden=true ng-click=removeBeer($index)></i></li></ul></div><div class=col-md-6><canvas id=beerDoughnut class="chart chart-doughnut" chart-data=beer.value chart-labels=beer.user></canvas></div></div></div>')}]),angular.module("adf.widget.beerCounter").controller("beerController",n),n.$inject=["$scope","data","beerService"],angular.module("adf.widget.beerCounter").controller("beerEditController",a),a.$inject=["$scope","config","beerService"],angular.module("adf.widget.beerCounter").service("beerService",i),i.$inject=["$q","$http","$parse"]}(window);