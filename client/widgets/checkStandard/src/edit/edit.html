<!-- Custom Template for autocompletion -->
<script type="text/ng-template" id="autocomplete.html">
  <a>
    <span ng-bind-html="match.model.url | uibTypeaheadHighlight:query"></span> |
    <small ng-bind-html="match.model.desc | uibTypeaheadHighlight:query"></small>
  </a>
</script>

<div class="form-group">
  <label for="tooltip">Description</label>
  <input id="tooltip" type="text" class="form-control" ng-model="config.tooltip" placeholder="Tooltips">
</div>

<form role="form">

  <div class="form-group">
    <label for="sample"> Datasources</label>
    <input id="sample" type="text" class="form-control" ng-model="config.database" placeholder="Type du Check" uib-typeahead="database for database in cs.getDatabase($viewValue)" typeahead-min-length='0' ng-blur="cs.getColumns(config.database)">
  </div>


  <div class="form-group">
    <label for="standardTest"> Test </label>
  </div>

  <div class="form-inline padding-bottom" ng-repeat="t in cs.config.test">
    <!-- <div class="form-group">
      <label class="sr-only" for="andor-{{$index}}"> And Or </label>
      <select class="form-control" ng-model="t.opBool" id="andor-{{$index}}">
        <option value="and"> AND </option>
        <option value="or"> OR </option>
      </select>
    </div> -->
    <div class="form-group">
      <label class="sr-only" for="column-{{$index}}"> Column </label>
      <select class="form-control" ng-model="t.column" id="column-{{$index}}">
        <option ng-repeat="column in config.colDatabase" value="{{column.Field}}"> {{column.Field}} </option>
      </select>
    </div>
    <div class="form-group">
      <label class="sr-only" for="test-{{$index}}"> Test </label>
      <select ng-model="t.test" class="form-control" id="test-{{$index}}">
        <option value="="> Egal </option>
        <option value="<>"> Different </option>
        <option value=">"> Superieur </option>
        <option value="<"> Inferieur </option>
      </select>
    </div>
    <div class="form-group">
      <label class="sr-only" for="value-{{$index}}"> Value </label>
      <input type="text" class="form-control" id="value-{{$index}}" placeholder="Value" ng-model="t.value">
    </div>
    <button type="button" class="btn btn-warning" ng-click="cs.removeColumn(true, $index)">
      <i class="fa fa-minus"></i> Remove
    </button>
  </div>

  <button type="button" class="btn btn-primary" ng-click="cs.addColumn(true)">
    <i class="fa fa-plus"></i> Add
  </button>

  <input type="checkbox" ng-model="config.positif"> <label> Positif </label>

  <div class="form-group">
    <label ng-click="isCollapsed = !isCollapsed"> Param√®tre Modal
      <span ng-hide="isCollapsed" class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span>
      <span ng-show="isCollapsed" class="glyphicon glyphicon-triangle-top" aria-hidden="true"></span>
    </label>
  </div>

  <div ng-show="isCollapsed">

      <div>
        <label>Column</label>
      </div>

      <div class="form-inline padding-bottom" ng-repeat="col in cs.config.columns">
        <div class="form-group">
          <label class="sr-only" for="title-{{$index}}">Title</label>
          <input type="text" id="title-{{$index}}" class="form-control" placeholder="Title" ng-model="col.title" required="">
        </div>
        <div class="form-group">
          <label class="sr-only" for="path-{{$index}}">Path</label>
          <input type="text" id="path-{{$index}}" class="form-control" placeholder="Path" ng-model="col.path" required="">
        </div>
        <button type="button" class="btn btn-warning" ng-click="cs.removeColumn(false, $index)">
          <i class="fa fa-minus"></i> Remove
        </button>
      </div>

      <button type="button" class="btn btn-primary" ng-click="cs.addColumn(false)">
        <i class="fa fa-plus"></i> Add
      </button>
  </div>

  <!-- MODE EXPERT -->

  <div>
    <input type="checkbox" ng-model="expert"> Expert Mode
  </div>

  <div ng-show="expert">
    <div class="form-group">
      <label class="sr-only" for="database"> Database </label>
      <input type="text" id="database" class="form-control" placeholder="Database" ng-model="config.database">
    </div>
    <div class="form-group">
      <label class="sr-only" for="query">Query</label>
      <textarea rows="3" id="query" class="form-control" placeholder="Query" ng-model="config.expert"></textarea>
    </div>
  </div>

</form>
